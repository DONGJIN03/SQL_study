## [가격대 별 상품 개수 구하기]

>핵심 개념: GROUP BY, FLOOR

### 문제 요약
만원 단위의 가격대별 상품 개수를 출력

### 데이터 구조
| 컬럼명 | 설명 |
|------|------|
| product_id | 상품 ID |
| product_code | 상품코드 |
| price | 판매가 |
---
### 접근 방식
1. 상품 가격을 만원 단위로 표현하기 위한 식 작성. 1만으로 나눈 몫에 정수 부분만 취해서 다시 1만을 곱함.
   <br> FLOOR(price / 10000) * 10000  
3. 가격대별 집계값을 구하기 위해 가격대별로 GROUP BY 실행
4. SELECT 문에 1만원 단위 칼럼을 나타내기 위해 위의 식을 사용하고 그룹별 상품 갯수를 세는 count() 함수 사용
5. 가격대 순으로 정렬
---

### 시행착오
- 1만원 단위로 표현하기 위해 CASE 문과 BETWEEN을 이용하여 각 범주별 가격대를 표현할려고 함.
- 해당 방식은 코드가 길어지고 상품 최대 가격을 확인해서 1만원 단위 범주를 전부 만들어야해서 비효율적이라 판단함.
  <br>추가로 실무에서는 새로운 상품이 추가되어 최대 가격대가 얼마든지 바뀔 수 있어 **원본 데이터가 바뀌어도 사용 가능한 코드를 작성하길 원함**.
- 1만원대 자릿수를 추출하고자 substring 문을 사용하여 맨앞 또는 뒤에서 5번째 자릿수를 추출하고자 했으나 가격대가
  <br>10만원대 또는 1만원 미만의 경우 해당 방식이 적합하지 못함을 인지
- **length문을 이용**해 각 자릿수에서 4를 뺀 자릿수까지 추출하는 방법으로 1만원 이하 단위를 잘라내는 식으로 작성.
  <br>이를 통해 10만원대 이상의 가격의 경우는 해결했지만 **1만원 미만의 가격대는 해결하지 못함**.
  <br>따라서 length가 4 이하일 경우는 0으로 처리하는 case문 작성.
- substring과 length, case문을 이용한 방식은 **원본 데이터가 바뀌어도 사용 가능하지만 보다 간결한 방법을 찾고자 함**.
- 최종적으로 나눗셈과 소수점을 버리는 산술계산 식을 이용하여 코드 완성

---

### 최종 쿼리
```sql
SELECT  FLOOR(PRICE / 10000) * 10000 AS PRICE_GROUP,
        COUNT(*) AS PRODUCTS
FROM PRODUCT
GROUP BY PRICE_GROUP
ORDER BY PRICE_GROUP ASC;
